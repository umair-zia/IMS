{% extends 'side-bar.html' %}
{% load static %}
{% block links %}
    <link href="https://cdn.alloyui.com/3.0.1/aui-css/css/bootstrap.min.css" rel="stylesheet">
    </link>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
        integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">


    <!-- jquery cdn -->
    <script src="https://code.jquery.com/jquery-3.5.1.js "
        integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin=" anonymous "></script>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.8.0/css/bootstrap-datepicker.css"
        rel="stylesheet" />


    <!-- JS, Popper.js, and jQuery -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
        integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous">
    </script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
        integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous">
    </script>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
        integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous" />
        <link rel="stylesheet" href="{% static 'css/side-bar.css' %}">   

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
        integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous" />
{% endblock %}
  
{% block content %}
 
        <div class="row time-table">
            <div class="col-md-8" id='calendar'>
                <div style='clear:both'></div>
            </div>
    
            
            <div class=" col-md-1 d-flex side-right">
<!--                <a type="button" data-toggle="modal" data-target="#editModal">-->
<!--                    <i class="fa fa-pencil icons-edit " aria-hidden="true"></i>-->
<!--                </a>-->
                <a type="button" data-toggle="modal" data-target="#addModal">
                    <i class="fa fa-plus ml-2 icons-add " aria-hidden="true"></i>
                </a>
    
                <!-- Modal edit-->
                <div class="modal" id="editModal" tabindex="-1" role="dialog"
                    aria-labelledby="exampleModalLongTitle" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered " role="document" >
                        <div class="modal-content" style="background-color: white;">
                            <div class="modal-header">
                                <h5 class="modal-title heading-last" id="exampleModalLongTitle">Edit Adhoc Schedule</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <div class="modal-timetable ">
                                    <form>
                                        <div class="row">
                                            <div class="col-md-12 ">
                                                <div class="form-group form-ctrl" style="width: 100%;"> 
                                                    
                                                <input
                                                    style="width: 96%; margin-left: 10px"
                                                    type="text"
                                                    class="form-control"
                                                    onfocus="(this.type='date')"
                                                    id="date"
                                                    placeholder="Date"
                                                />
                                                </div>
                                            </div>
    
                                            <div class="col-md-12 d-flex justify-content-center">
                                                <div class="col-md-6">
                                                    <div class="form-group form-ctrl">
                                                          <select id="room" class="form-control select h-25  pt-4 pb-4">
                                                            <option selected>Exam</option>
                                                            <option>M1</option>
                                                            <option>M2</option>
                                                          </select>
                                                      </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group form-ctrl">
                                                        <input
                                                            type="text"
                                                            class="form-control"
                                                            onfocus="(this.type='date')"
                                                            id="certification-date"
                                                            placeholder="Certification Date"
                                                            name="certificateDate"
                                                        />
                                                        </div>
                                                </div>
                                            </div>
    
                                            <div class="col-md-12 d-flex justify-content-center">
                                                <div class="col-md-6">
                                                    <div class="form-group form-ctrl">
                                                        <input
                                                            type="text"
                                                            class="form-control"
                                                            onfocus="(this.type='date')"
                                                            id="registration-date"
                                                            placeholder="Registration Date"
                                                            name="registrationDate"
                                                        />
                                                        </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group form-ctrl">
                                                        <input
                                                            type="text"
                                                            class="form-control"
                                                            onfocus="(this.type='date')"
                                                            id="result-date"
                                                            placeholder="Result Date"
                                                            name="resultDate"
                                                        />
                                                        </div>
                                                </div>
                                            </div>
    
                                            <div class="col-md-12 d-flex justify-content-center">
                                                <div class="col-md-6">
                                                    <div class="form-group form-ctrl">
                                                          <select id="room" class="form-control select h-25  pt-4 pb-4" name="room">
                                                            <option selected value="">Room</option>
                                                            <option>n1</option>
                                                            <option>n9</option>
                                                          </select> 
                                                      </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group form-ctrl">
                                                        <input
                                                            type="text"
                                                            class="form-control"

                                                            id="seats"
                                                            placeholder="Seats"
                                                        />
                                                        </div>
                                                </div>
                                            </div>
    
                                            <div class="col-md-12 d-flex justify-content-center">
                                                <div class="col-md-6">
                                                    <div class="form-group form-ctrl">
                                                        <input
                                                            type="text"
                                                            class="form-control"
                                                            onfocus="(this.type='time')"
                                                            id="start-time"
                                                            placeholder="Start time"
                                                        />
                                                        </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group form-ctrl">
                                                        <input
                                                            type="text"
                                                            class="form-control"
                                                            onfocus="(this.type='time')"
                                                            id="end-time"
                                                            placeholder="End Time"
                                                        />
                                                        </div>
                                                </div>
                                            </div>
    
                                            <div class="col-md-12 d-flex justify-content-center">
                                                <div class="col-md-6">
                                                    <div class="form-group form-ctrl">
                                                        <input
                                                            type="text"
                                                            class="form-control"
                                                            onfocus="(this.type='time')"
                                                            id="break-start-time"
                                                            placeholder="Break start time"
                                                        />
                                                        </div>
                                                </div>
    
                                                <div class="col-md-6">
                                                    <div class="form-group form-ctrl">
                                                        <input
                                                            type="text"
                                                            class="form-control"
                                                            onfocus="(this.type='time')"
                                                            id="break-end-time"
                                                            placeholder="Break end time"
                                                        />
                                                        </div>
                                                </div>
                                            </div>
                            
                                            <div class="col-md-12 text-center">
                                                <button type="submit" class="button-submit">
                                                Submit
                                                </button>
                                            </div>
    
                                        </div>
                                    </form>
                                    </div>
                            </div>
                        </div>
                    </div>
                </div>
    
                        
                
    
                <!-- Modal add -->
    
                <div class="modal" id="addModal" tabindex="-1" role="dialog"
                aria-labelledby="exampleModalLongTitle" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered " role="document" >
                    <div class="modal-content" style="background-color: white;">
                        <div class="modal-header">
                            <h5 class="modal-title heading-last" id="exampleModalLongTitle">Create Adhoc Schedule</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="modal-timetable ">
                                <form action="{% url 'schedule:createAdhoc' %}" method="post">
                                    {% csrf_token %}


                                    <div class="row">
                                        <div class="col-md-12 d-flex justify-content-center">
                                            <div class="col-md-6">
                                                <div class="form-group form-ctrl" style="width: 100%;">

                                                    <input
                                                        style=" "
                                                        type="text"
                                                        class="form-control"
                                                        onfocus="(this.type='date')"
                                                        id="date"
                                                        placeholder="Date"
                                                        name="date"
                                                        required
                                                    />
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group form-ctrl">
<!--                                                  <label class="label-style">Exam Mode</label>-->
                                                  <input class="form-control" type="text" name="examMode" placeholder="Mode" required>
                                                </div>
                                            </div>

                                        </div>
    
                                        <div class="col-md-12 d-flex justify-content-center">
                                            <div class="col-md-6">
                                                    <div class="form-group form-ctrl">
                                    <!--                          <label class="label-style">Exam</label>-->
                                                              <select id="room" class="form-control select h-25  pt-4 pb-4 selectBox" name="exam" required>
                                                                <option  value="">Select Exam</option>
                                                                {% for e in exam %}
                                                                  <option value="{{e.Exam_Code}}">{{e.Exam_Code}}</option>
                                                                {% endfor %}
                                                              </select>
                                                    </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group form-ctrl">
                                                    <input
                                                        type="text"
                                                        class="form-control"
                                                        onfocus="(this.type='date')"
                                                        id="certification-date"
                                                        placeholder="Certification Date"
                                                        name="certificateDate"

                                                    />
                                                    </div>
                                            </div>
                                        </div>
    
                                        <div class="col-md-12 d-flex justify-content-center">
                                            <div class="col-md-6">
                                                <div class="form-group form-ctrl">
                                                    <input
                                                        type="text"
                                                        class="form-control"
                                                        onfocus="(this.type='date')"
                                                        id="registration-date"
                                                        placeholder="Registration Date"
                                                        name="registrationDate"
                                                        required
                                                    />
                                                    </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group form-ctrl">
                                                    <input
                                                        type="text"
                                                        class="form-control"
                                                        onfocus="(this.type='date')"
                                                        id="result-date"
                                                        placeholder="Result Date"
                                                        name="resultDate"

                                                    />
                                                    </div>
                                            </div>
                                        </div>
    
                                        <div class="col-md-12 d-flex justify-content-center">
                                            <div class="col-md-6">
                                            <div class="form-group form-ctrl">
                            <!--                  <label class="label-style">Room</label>-->
                                              <select id="room" class="form-control select h-25  pt-4 pb-4 selectBox" name="room" required>
                                                <option  value="">Select Room</option>
                                                {% for r in room %}
                                                  <option value="{{r.ROOMID}}">{{r.ROOMDESC}}</option>
                                                {% endfor %}
                                              </select>
                                            </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group form-ctrl">
<!--                                                  <label class="label-style">Seats</label>-->
                                                  <input class="form-control selectBox" type="number" name="seats" placeholder="Seats" required>
                                                </div>
                                            </div>
                                        </div>
    
                                        <div class="col-md-12 d-flex justify-content-center">
                                            <div class="col-md-6">
                                                <div class="form-group form-ctrl">
<!--                                                  <label class="label-style">Exam Medium</label>-->
                                                  <input class="form-control selectBox" type="text" name="examMedium" placeholder="Medium" required>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group form-ctrl">
<!--                                                          <label class="label-style">Subcode</label>-->
                                                          <select id="room" class="form-control select h-25  pt-4 pb-4 selectBox" name="subcode" required>
                                                            <option  value="">Select Subcode</option>
                                                              <option  value="-">-</option>
                                                            {% for s in subcodes %}
                                                              <option value="{{s.Module_Code}}">{{s.Module_Code}}</option>
                                                            {% endfor %}
                                                          </select>
                                                </div>
                                            </div>
                                        </div>
    
                                        <div class="col-md-12 d-flex justify-content-center">
                                            <div class="col-md-6">
                                                <div class="form-group form-ctrl">
<!--                                                  <label class="label-style">Exam Medium</label>-->
                                                  <input class="form-control selectBox" type="text" name="session" placeholder="Session Code" required>
                                                </div>
                                            </div>
    
                                            <div class="col-md-6">
                                            <div class="form-group form-ctrl">
<!--                                                          <label class="label-style">Company ID</label>-->
                                                          <select id="room" class="form-control select h-25  pt-4 pb-4 selectBox" name="componyId" required>
                                                            <option  value="">Select Company ID</option>
                                                              <option  value="OPEN">OPEN</option>
                                                            {% for c in companyid %}
                                                              <option value="{{c.COMPANYID}}">{{c.COMPANYID}}</option>
                                                            {% endfor %}
                                                          </select>
                                                </div>
                                            </div>
                                        </div>
                        
                                        <div class="col-md-12 text-center">
                                            <button type="submit" class="button-submit">
                                            Submit
                                            </button>
                                        </div>
    
                                    </div>
                                </form>
                                </div>
                        </div>
                    </div>
                </div>
            </div>
            </div>
<!--            <div class="col-md-3">-->
<!--                    <div class="calendar-container">-->
<!--                        <div class="year-header d-flex align-items-center">-->
<!--                            <span class="year" id="label">-->
<!--                            </span>-->
<!--                            <div id="left-right">-->
<!--                                <span class="left-button" id="prev">-->
<!--                                    <a>-->
<!--                                        <i class="fa fa-angle-left" style="font-size: 20px"-->
<!--                                            aria-hidden="true"></i>-->
<!--                                    </a>-->
<!--                                </span>-->
<!--                                <span class="right-button" id="next">-->
<!--                                    <a>-->
<!--                                        <i class="fa fa-angle-right" style="font-size: 20px"-->
<!--                                            aria-hidden="true"></i>-->
<!--                                    </a>-->
<!--                                </span>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                        <table class="months-table">-->
<!--                            &lt;!&ndash; Months row in calender &ndash;&gt;-->
<!--                            &lt;!&ndash; <tbody>-->
<!--                                        <tr class="months-row">-->
<!--                                            <td class="month">Jan</td>-->
<!--                                            <td class="month">Feb</td>-->
<!--                                            <td class="month">Mar</td>-->
<!--                                            <td class="month">Apr</td>-->
<!--                                            <td class="month">May</td>-->
<!--                                            <td class="month">Jun</td>-->
<!--                                            <td class="month">Jul</td>-->
<!--                                            <td class="month">Aug</td>-->
<!--                                            <td class="month">Sep</td>-->
<!--                                            <td class="month">Oct</td>-->
<!--                                            <td class="month">Nov</td>-->
<!--                                            <td class="month">Dec</td>-->
<!--                                        </tr>-->
<!--                                    </tbody> &ndash;&gt;-->
<!--                        </table>-->
<!--                        <table class="days-table">-->
<!--                            <td class="day">Sun</td>-->
<!--                            <td class="day">Mon</td>-->
<!--                            <td class="day">Tue</td>-->
<!--                            <td class="day">Wed</td>-->
<!--                            <td class="day">Thu</td>-->
<!--                            <td class="day">Fri</td>-->
<!--                            <td class="day">Sat</td>-->
<!--                        </table>-->
<!--                        <div class="frame">-->
<!--                            <table class="dates-table">-->
<!--                                <tbody class="tbody">-->
<!--                                </tbody>-->
<!--                            </table>-->
<!--                        </div>-->
<!--                    </div>-->
<!--    -->
<!--                    <div class="progress-conent ">-->
<!--                        <div class=" d-flex justify-content-around mt-5">-->
<!--                            <div>-->
<!--                                <h5 class="font-weight-bold mt-2" style="font-size: 17px;">Threshold</h5>-->
<!--                            </div>-->
<!--                            <h5 class="mt-2">order by <span>-->
<!--                                    <a>-->
<!--                                        <i class=" fa fa-angle-down ">-->
<!--    -->
<!--                                        </i>-->
<!--                                    </a>-->
<!--                                </span></h5>-->
<!--                        </div>-->
<!--    -->
<!--                        <div class="mt-4 ">-->
<!--                            <div class="d-flex justify-content-around mt-5 ml-n5 ">-->
<!--                                <div class="progress-right-side  " data-value='60'>-->
<!--                                    <span class="progress-left ">-->
<!--                                        <span class="progress-bar border-primary "></span>-->
<!--                                    </span>-->
<!--                                    <span class="progress-right ">-->
<!--                                        <span class="progress-bar border-primary "></span>-->
<!--                                    </span>-->
<!--                                    <div-->
<!--                                        class="progress-value w-100 h-100 rounded-circle d-flex align-items-center justify-content-center ">-->
<!--                                        <div class="h5 font-weight-bold pt-1 ">60%</div>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                                <div class="ml-n5 ">-->
<!--                                    <p class="font-weight-bold " style="font-size: medium; ">Room 1-->
<!--                                    </p>-->
<!--                                    <p style="font-size:small;  " ">60 %</p>-->
<!--                            </div>-->
<!--    -->
<!--                        </div>-->
<!--    -->
<!--                        <div class=" d-flex justify-content-around mt-5 ml-n5 ">-->
<!--                            <div class=" progress-right-side " data-value='40'>-->
<!--                                <span class=" progress-left ">-->
<!--                                        <span class=" progress-bar border-primary "></span>-->
<!--                                </span>-->
<!--                                <span class=" progress-right ">-->
<!--                                        <span class=" progress-bar border-primary "></span>-->
<!--                                </span>-->
<!--                                <div class=" progress-value w-100 h-100 rounded-circle d-flex-->
<!--                                        align-items-center justify-content-center ">-->
<!--                                    <div class=" h5 font-weight-bold pt-1 ">40%</div>-->
<!--                                </div>-->
<!--                            </div>-->
<!--    -->
<!--                            <div class=" ml-n5 ">-->
<!--                                <p class=" font-weight-bold mt-2 " style=" font-size: medium; ">Room 3</p>-->
<!--                                <p style=" font-size: small " ">40 %</p>-->
<!--                                </div>-->
<!--    -->
<!--                            </div>-->
<!--    -->
<!--                        </div>-->
<!--                    </div>-->
<!--            </div>-->
        </div>

    {% block script %}

        <script src="{% static 'js/scheduler.js'%}"></script>
        <script src="{% static 'js/time-table.js'%}"></script>

        <script>
                $("#menu-toggle ").click(function (e) {
                e.preventDefault();
                $("#wrapper ").toggleClass("toggled ");
            });
        </script>

         <script>
            document.addEventListener('DOMContentLoaded', function() {
            var calendarEl = document.getElementById('calendar');   
            var calendar = new FullCalendar.Calendar(calendarEl, {
                eventClick: function(info) {
                    var eventObj = info.event;

                    if (eventObj.url) {
                        alert(
                            'Clicked ' + eventObj.title + '.\n' +
                            'Will open ' + eventObj.url + ' in a new tab'
                        );

                        window.open(eventObj.url);

                        info.jsEvent.preventDefault(); // prevents browser from following link in current tab.
                    } else {
                        alert('Title :' + eventObj.title );
                    }
                },
                themeSystem: 'standard',
                headerToolbar: {
                left: 'prev,next today',
                center: 'title',
                right: 'timeGridDay,dayGridMonth'
                },
                initialDate: '2020-09-05',
                navLinks: true, // can click day/week names to navigate views
                businessHours: true, // display business hours
                editable: false,
                selectable: true,
                dayMaxEvents: true,



                 events: [
                     {% for e in events %}
                     {
                         title: '{{ e.name }} {{e.examSch.ROOMID}}',
                         start: '{{ e.start.date|date:'Y-m-d' }}T{{ e.start.time|time:'H:i' }}',
                         end: '{{ e.end.date|date:'Y-m-d' }}T{{ e.end.time|time:'H:i' }}',

                     },
                     {% endfor %}

                 ],


            });
        
            calendar.render();
            });     
        </script> 

        <script>
            // Progress bar
            $(function () {
                $(".progress-left-side ").each(function () {
                    var value = $(this).attr('data-value');
                    var left = $(this).find('.progress-left .progress-bar');
                    var right = $(this).find('.progress-right .progress-bar');
                    if (value > 0) {
                        if (value <= 50) {
                            right.css('transform', 'rotate(' + percentageToDegrees(value) + 'deg)')
                        } else {
                            right.css('transform', 'rotate(180deg)')
                            left.css('transform', 'rotate(' + percentageToDegrees(value - 50) + 'deg)')
                        }
                    }
                })
                function percentageToDegrees(percentage) {
                    return percentage / 100 * 360
                }
            });

            $(function () {
                $(".progress-right-side ").each(function () {
                    var value = $(this).attr('data-value');
                    var left = $(this).find('.progress-left .progress-bar');
                    var right = $(this).find('.progress-right .progress-bar');
                    if (value > 0) {
                        if (value <= 50) {
                            right.css('transform', 'rotate(' + percentageToDegrees(value) + 'deg)')
                        } else {
                            right.css('transform', 'rotate(180deg)')
                            left.css('transform', 'rotate(' + percentageToDegrees(value - 50) + 'deg)')
                        }
                    }

                })
                function percentageToDegrees(percentage) {
                    return percentage / 100 * 360
                }
            });
        </script>

        <script>
            function a() {
                $('.fc-daygrid-event-harness')
                .parent('div')
                .siblings('.fc-daygrid-day-top')
                .children('a')
                .css({'background':'#EB4040', 'border-radius': '50%', 'width': '30px', 'height': '30px', 'padding-left': '2.3px', 'text-align': 'center', 'color': 'white', 'font-weight': 'bold'});
            }

            function b(){
                $('.fc-daygrid-event-harness')
                .parent('div')
                .siblings('.fc-daygrid-day-top')
                .children('')
                .mouseover(function(){
                        $(this).css({"background-color":"white", "color": "red"});
                    }).mouseout(function(){
                        $(this).css({"background-color":"#EB4040", "color": "white"});
                    })

                $('.fc-daygrid-event-harness')
                    .parent('div')
                    .parent('div')
                    .mouseover(function(){
                        $(this).css({"background-color":"#EB4040", "color": "#EB4040"});
                        $(this)
                            .children(".fc-daygrid-day-top").children("a")
                            .css({"background-color":"white", "color": "#EB4040"})
                        
                    }).mouseout(function(){
                        $(this).css({"background-color":"transparent", "color": "white"});
                        $(this)
                            .children(".fc-daygrid-day-top").children("a")
                            .css({"background-color":"#EB4040", "color": "white"})
                    });
            }

            $(document).ready(function () {      
                $('.fc-today-button').on('click' ,function(){
                    a()
                    b()
                });
                $('.fc-button-group').on('click' ,function(){
                    a()
                    b()
                }); 
                $('.fc-event-title').on({
                    'mouseenter':function(){
                        $(this).attr('title',$(this).text())    
                    }
                })           
                a()
                b()                
                $('.table-date').on('click', function () {
                    var id = document.getElementsByClassName("active-date");
                    {#alert(this.innerText)#}
                })
            });          
        </script>
        <style>
            body {
                text-align: center;
                font-size: 14px;
                background-color: white;
                font-family: "Helvetica Nueue", Arial, Verdana, sans-serif;
            }
            #calendar {
                margin: 0 auto;
                width: 900px;
                padding: 0;
                padding-left: 0px;
                padding-bottom: 20px;
                background-color: white;
            }
        </style>
    {% endblock %}
{% endblock %}